{
  "info": {
    "name": "Homeandow API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth - Login",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" },
          { "key": "X-API-Key", "value": "{{API_KEY}}" }
        ],
        "url": {
          "raw": "{{API_BASE}}/auth/login",
          "host": [ "{{API_BASE}}" ],
          "path": [ "auth", "login" ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"admin@homeandown.com\",\n  \"password\": \"Frisco@2025\"\n}"
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "let j = {};",
              "try { j = pm.response.json(); } catch(e) {}",
              "if (j && j.auth_token) { pm.environment.set('AUTH_TOKEN', j.auth_token); }",
              "pm.test('Login should return token', function () { pm.expect(!!j.auth_token).to.be.true; });"
            ],
            "type": "text/javascript"
          }
        }
      ]
    },
    {
      "name": "Auth - Me",
      "request": {
        "method": "GET",
        "header": [
          { "key": "Authorization", "value": "Bearer {{AUTH_TOKEN}}" }
        ],
        "url": {
          "raw": "{{API_BASE}}/auth/me",
          "host": [ "{{API_BASE}}" ],
          "path": [ "auth", "me" ]
        }
      }
    }
  ]
}
